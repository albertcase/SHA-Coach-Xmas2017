<!DOCTYPE HTML>
<html>
<head>
    <title>coach</title>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
    <meta name="format-detection" content="telephone=no">
    <!-- uc强制竖屏 -->
    <meta name="screen-orientation" content="landscape">
    <!-- QQ强制竖屏 -->
    <meta name="x5-orientation" content="landscape">

    <!-- <link rel="apple-touch-startup-image" href="/build/assets/img/bg1.png" />
 -->
    <!--禁用手机号码链接(for iPhone)-->
    <meta name="viewport" content="width=device-width,initial-scale=1.0,user-scalable=0,minimum-scale=1.0,maximum-scale=1.0,minimal-ui" />
    <!--自适应设备宽度-->
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <!--控制全屏时顶部状态栏的外，默认白色-->
    <meta name="apple-mobile-web-app-capable" content="yes" />
    <meta name="Keywords" content="">
    <meta name="Description" content="...">
    <link rel="stylesheet" type="text/css" href="css/bundle.min.css">
    <script type="text/javascript" src="js/bundle-vendor.min.js"></script>
    <style type="text/css">
        #orientLayer { display: none; }
        @media screen and (min-aspect-ratio: 13/9) { 
            #orientLayer { display: block; } 
        }
    </style>
</head>
<body>
<div class="loading">
    <div class="loading_con">
        <img src="img/logo.png" width="100%">

        <div class="spinner">
            <div class="bounce1"></div>
            <div class="bounce2"></div>
            <div class="bounce3"></div>
        </div>
        <p>目前涌入的小伙伴过多<br>页面正在跳转中，请耐心等待。</p>
    </div>
</div>

<div id="orientLayer" class="mod-orient-layer">
    <div class="mod-orient-layer__content">
        <i class="icon mod-orient-layer__icon-orient"></i>
        <div class="mod-orient-layer__desc">为了更好的体验，请解锁竖屏浏览<br><em>建议全程在wifi环境下观看</em></div>
    </div>
</div>



<div id="dreambox">
    <div class="section" id="index">
        <div class="kv">
            <a href="javascript:void(0);" class="games-list"></a>
        </div>
        <div class="index-foot">
            <a href="javascript:void(0);" class="home-play-btn"></a>
            <a href="javascript:void(0);" class="rule-btn"></a>
        </div>
    </div>
    <div class="section" id="chose">
        <div class="slogan"></div>
        <div class="jue-se--chose">
            <div class="jue-se--large">
               <!-- Swiper -->
                <div class="swiper-container">
                    <div class="swiper-wrapper">
                      <div class="swiper-slide">
                        <div class="jue-se--item kl"></div>
                      </div>
                      <div class="swiper-slide">
                        <div class="jue-se--item qw"></div>
                      </div>
                      <div class="swiper-slide">
                        <div class="jue-se--item mhl"></div>
                      </div>
                    </div>
                </div>
            </div>
            <div class="swiper-pagination" id="jue-se-small">
                <div class="jue-se--item kl"></div>
                <div class="jue-se--item qw"></div>
                <div class="jue-se--item mhl"></div>
            </div>


        </div>
        <div class="start-btn"></div>
    </div>
</div>



<script>
    var common = new Common();

    // 成绩榜
    var toplistJson = {
        'list': [
            {
                'name': 'a',
                'socurs': '1分20秒'
            },
            {
                'name': 'b',
                'socurs': '1分20秒'
            },
            {
                'name': 'c',
                'socurs': '1分20秒'
            },
            {
                'name': 'd',
                'socurs': '1分20秒'
            },
            {
                'name': 'e',
                'socurs': '1分20秒'
            },
            {
                'name': 'f',
                'socurs': '1分20秒'
            },
            {
                'name': 'g',
                'socurs': '1分20秒'
            },
            {
                'name': 'h',
                'socurs': '1分20秒'
            },
            {
                'name': 'i',
                'socurs': '1分20秒'
            },
            {
                'name': 'j',
                'socurs': '1分20秒'
            }
        ],
        'userinfo': {
            'socurs': '1分23秒',
            'ranking': '121'
        }
    };

    function Toplist(id, eventEl){
        if(!(this instanceof Toplist)){
            var self = new Toplist(id, eventEl);
            self.init();
            return self;
        };
        return {
            init: function(){
                this.render();
            },
            setting: {
                id: id,
                popupFrame: null,
                eventEl: eventEl,
                listDatas: toplistJson
            },
            render: function(){
                var me = this;
                me.setting.popupFrame = common.Popup(me.setting.id, me.do(), me.setting.eventEl);
            },
            do: function(){
                var me = this;
                var jsonDatas = me.setting.listDatas; 
                var jsonDatasList = jsonDatas.list;

                var dataslistArray = [];
                for(let i = 0; i < jsonDatasList.length; i++){
                    dataslistArray.push(`<li><span>${jsonDatasList[i]['name']}</span><span>${jsonDatasList[i]['socurs']}</span></li>`);
                }
                var dataslistHTML = `<div class="toplist-popup--context"><ul>
                                        ${dataslistArray.join('')}
                                    </ul></div>
                                    <div class="toplist-info">
                                        <div class="socurs">${jsonDatas.userinfo.socurs}</div>
                                        <div class="ranking">${jsonDatas.userinfo.ranking}名</div>
                                    </div>
                                    `;
                return dataslistHTML;
            }
        }
    }

    Toplist('toplist-popup', '.games-list');



    // ruler
    function Ruler(id, eventEl){
        if(!(this instanceof Ruler)){
            var self = new Ruler(id, eventEl);
            self.init();
            return self;
        };
        this.setting = {
            id: id,
            popupFrame: null,
            eventEl: eventEl
        }
    }

    Ruler.prototype.init = function(){
        this.render();
    }

    Ruler.prototype.render = function(){
        var me = this;
        me.setting.popupFrame = common.Popup(me.setting.id, me.do(), me.setting.eventEl);
    }

    Ruler.prototype.do = function(){
        return `
            <div class="rule-con">
                <div class="title">活动细则</div>
                <div class="content">
                    <strong>参与本活动无需以购买蔻驰产品或服务为前提。购买我们的产品或服务并不会增加你在本次活动中的获胜机会。本次活动最终解释权归蔻驰贸易（上海）有限公司所有。</strong><br>

                    <ol type="1">
                        <li>参与资格: 任何中国公民均有资格参与微信“人气母女大比拼”活动（以下简称本活动）。本次活动将严格遵守中华人民共和国的相关法律及法规。参与本活动表示你同意无条件完全遵守本活动细则以及活动主办方的相关决定。</li>

                        <li>活动主办方: 蔻驰贸易（上海）有限公司<br>
                            南京西路1717号会德丰广场20楼，200042.</li>

                        <li>活动时间: 本活动日期由北京时间（日期），活动主办方的电脑时间为本次活动的官方时间标准。</li>

                        <li>怎样参与本次活动:
                        在活动期间，所有添加蔻驰官方微信账号的用户，根据账号内指引，上传符合活动要求的照片，即有资格参与蔻驰此次母亲节活动。活动主办方有义务在活动期间保证活动功能可被正常使用。</li>

                        <li>获奖者的认证：所有的活动参与者都必须满足活动细则中的所有条款。获取奖品的先决条件是必须完成所有相关的任务。主办方不会接受截图或者其他的证据来验证获奖资格。在活动期间，如果在系统出现问题时产生的结果是不会被视作有效的。活动主办方在法律允许范围内负责制定、解释、修改并及时公布本次活动的规则，并最终确定获奖者。</li>

                        <li>奖品:由蔻驰提供的精美礼品一份（数量有限，送完为止）。</li>

                        <li>活动信息公告：在符合法律相关规定的情况下，获奖者必须同意活动主办方在媒体上披露获奖者的姓名，微信头像与信息，语音，意见，身份信息和居住城市，主办方并不需要为此再支付额外费用或另行通知。活动主办方有权依据相关法律法规或业务需要，中止或取消此次活动或者修改活动方案，经相关途径公告后生效。</li>

                        <li>一般性条款：如果发现欺诈，或者技术事故，或者由超出活动主办方能力控制的影响活动公正性的情况发生，活动主办方保留单方面取消或者变更本活动的相关权利。如果发生类似情况，活动主办方保留随机发送奖品給予事故发生前活动参赛者的权利。活动主办方同时保留在参赛者违反公平性原则或者利用不当行为获利的情况下单方面取消参赛者资格的权利。活动主办方保留采取法律手段追诉对于蓄意破坏和攻击活动网站的人的权利并可能要求相关赔偿。</li>
                         
                        <li>豁免条款: 参与本次活动的参赛者不得采用任何直接或者间接的方式沟通或者伤害任何蔻驰贸易（上海）有限公司及其合作伙伴及和本次活动有关的任何相关公司的雇员。</li>
                         
                        <li>相关责任: 活动主办方不对以下情况负责：<br>
                            <ol type="1">
                                <li>由媒体提供的关于本次活动的任何不准确或者不精确的信息</li>
                                <li>任何形式的技术故障，包括软硬件的损坏或者网络问题</li>
                                <li>对于本次活动的人为的恶意破坏</li>
                                <li>技术或人为的监管问题</li>
                                <li>因为参加本次活动直接或间接而产生的人身伤害。</li>
                                <li>如果因为技术或者收到恶意攻击等原因导致实际获奖者总人数超过事先公布的人数，活动主办方保留从中按照事先公布的获奖总数从中随机抽取的权利。</li>
                                <li>由于技术问题包括但不仅限于微信软件系统问题而产生的现金红包无法使用的问题。</li>
                                <li>用户对于该金额的支配和使用而产生的相关问题。</li>
                            </ol>
                        </li>
                    </ol>
                    <br>

                </div>
            </div>
        `;
    }

    Ruler('rule-popup', '.rule-btn');
    

    

    




    function PageController(){
        this.common = 
        this.container = {
            'homePlayBtn': null,
            'startGo': null
        }

        this.init = function(){
            common.PageRouter('index');
            this.render();
            this.bind();
        }

        this.render = function(){
            this.container.homePlayBtn = document.querySelector('.home-play-btn');
            this.container.startGo = document.querySelector('.start-btn');
        }

        this.bind = function(){

            // 包你好玩按钮
            this.container.homePlayBtn.addEventListener('click', function(){
                common.PageRouter('chose', function(){
                    if(swiper) return false;
                    var jueSeItem = ['kl', 'qw', 'mhl'];
                    var swiper = new Swiper('.swiper-container',{
                        effect : 'coverflow',
                        slidesPerView: 1,
                        centeredSlides: true,
                        pagination: {
                        el: '.swiper-pagination',
                        clickable: true,
                        renderBullet: function (index, className) {
                          return `<div class="${className} jue-se--item ${jueSeItem[index]}"></div>`;
                          // return '<div class="' + className + '">' + (index + 1) + '</div>';
                        },
                      },
                    });
                });
            })

            // 出发
            this.container.startGo.addEventListener('click', function(){
                location.href = 'game.html';
            })
        }
    }

    var pageController = new PageController();
    pageController.init();


</script>

</body>
</html>