<!DOCTYPE HTML>
<html>
<head>
    <title>coach</title>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
    <meta name="format-detection" content="telephone=no">
    <!-- uc强制竖屏 -->
    <meta name="screen-orientation" content="landscape">
    <!-- QQ强制竖屏 -->
    <meta name="x5-orientation" content="landscape">

    <!-- <link rel="apple-touch-startup-image" href="/build/assets/img/bg1.png" />
 -->
    <!--禁用手机号码链接(for iPhone)-->
    <meta name="viewport" content="width=device-width,initial-scale=1.0,user-scalable=0,minimum-scale=1.0,maximum-scale=1.0,minimal-ui" />
    <!--自适应设备宽度-->
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <!--控制全屏时顶部状态栏的外，默认白色-->
    <meta name="apple-mobile-web-app-capable" content="yes" />
    <meta name="Keywords" content="">
    <meta name="Description" content="...">
    <link rel="stylesheet" type="text/css" href="css/bundle.min.css">
    <script type="text/javascript" src="js/bundle-vendor.min.js"></script>
</head>
<body>
<div class="loading">
    <div class="loading_con">
        <img src="img/logo.png" width="100%">

        <div class="spinner">
            <div class="bounce1"></div>
            <div class="bounce2"></div>
            <div class="bounce3"></div>
        </div>
        <p>目前涌入的小伙伴过多<br>页面正在跳转中，请耐心等待。</p>
    </div>
</div>

<!-- 横屏代码 -->
<div id="orientLayer" class="mod-orient-layer">
    <div class="mod-orient-layer__content">
        <i class="icon mod-orient-layer__icon-orient"></i>
        <div class="mod-orient-layer__desc">为了更好的体验，请解锁横屏浏览<br><em>建议全程在wifi环境下观看</em></div>
    </div>
</div>

<div class="shareTips hidden">
    <a href="javascript:void(0);" class="close"></a>
</div>

<div id="dreambox">
    <div class="section show" id="scene">
        
        <div class="gameTips">
            <a href="javascript:void(0);" class="iknow-btn"></a>
        </div>
        <div class="element"></div>

        <div class="gameover">GAME OVER</div>
        <div id="gemeTime">
            <div class="timeArea">
                <!-- 正在加载... -->
            </div>
            <!-- <div class="gtContext"></div> -->
        </div>
        <div class="bg">
            <div class="scene-bg scene1"></div>
            <div class="scene-bg scene2"></div>
            <div class="scene-bg scene3"></div>
            <div class="scene-bg scene4"></div>
        </div>
    </div>

    <!-- 得分页面 -->
    <div class="section" id="scores">
        <div class="toplist-tag"></div>
        <div class="scores-show--context">   
            <div class="heartCount">30 个</div>
            <div class="timeCount">01 分 23 秒</div>
        </div>
        <div class="scores-btn--area">
            <a href="javascript:void(0);" class="replay-btn"></a>
            <a href="javascript:void(0);" class="gift-btn"></a>
        </div>
    </div>

    <!-- 游戏榜单 -->
    <div class="section" id="toplist">
        <div class="toplist-l">
            <div class="toplist-userinfo waiting">
                正在加载...
            </div>
            <div class="qrcode">
                <img src="img/qrcode.png" width="100%;">
            </div>
            <a href="javascript:void(0);" class="back-btn"></a>
        </div>
        <div class="toplist-r">
            <div class="toplist-table">
                <ul class="waiting">
                    正在加载...
                </ul>
            </div>
        </div>
    </div>

    <!-- 分享 -->
    <div class="section" id="share">
        <div class="share-con">
            <div class="head-star"></div>
            <div class="xmasVideo"></div>
            <div class="share-btn-area">
                <a href="javascript:void(0);" class="replay-btn"></a>
                <a href="javascript:void(0);" class="list-btn"></a>
                <a href="javascript:void(0);" class="chose-buy-btn"></a>
            </div>
        </div>
    </div>


</div>


<script type="text/javascript" src="js/bundle.min.js"></script>
<script type="text/javascript">

    // ?id =1
    function GetQueryString(name){
        var reg = new RegExp("(^|&)"+ name +"=([^&]*)(&|$)");
        var r = window.location.search.substr(1).match(reg);
        if(r!=null)return unescape(r[2]); return null;
    }

    // 视频
    function XmasVideo(el){
        return {
            datas: {
                parentEl: document.querySelector(el),
                path: 'media/test.mp4',
                poster: 'media/poster.jpg',
                posterEl: null,
                el: null,
                videoWidth: 0
            },
            init: function(){
                var me  = this;
                me.render();
            },
            render: function(){
                var me = this;
                me.datas.videoWidth = parseInt(window.getComputedStyle(me.datas.parentEl).width, 10);
                me.create();
            },
            create: function(){
                var me = this;

                var posterEl = document.createElement('div');
                posterEl.className = 'posterEl';
                me.datas.posterEl = posterEl;
                me.datas.parentEl.appendChild(posterEl);

                var el = document.createElement('video');
                el.id = 'xmas-video';
                el.src = me.datas.path;
                el.poster = me.datas.poster;
                el.width = me.datas.videoWidth;
                el.innerHTML = '您的浏览器不支持 video 标签。';
                me.datas.el = el;
                me.datas.parentEl.appendChild(el);
                

                me.bind();
            },
            bind: function(){
                var me = this;
                me.datas.posterEl.onclick = function(){
                    me.datas.el.play();
                    me.datas.posterEl.style.visibility = 'hidden';
                }
            }
        }
    }

    var xmasVideo = new XmasVideo('.xmasVideo');
    xmasVideo.init();


    // 成绩榜
    var toplistJson = {
        'list': [
            {
                'name': 'a',
                'socurs': '1分20秒'
            },
            {
                'name': 'b',
                'socurs': '1分20秒'
            },
            {
                'name': 'c',
                'socurs': '1分20秒'
            },
            {
                'name': 'd',
                'socurs': '1分20秒'
            },
            {
                'name': 'e',
                'socurs': '1分20秒'
            },
            {
                'name': 'f',
                'socurs': '1分20秒'
            }
        ],
        'userinfo': {
            'socurs': '1分23秒',
            'ranking': '121'
        }
    };

    function Toplist(listEl, userinfoEl){
        this.setting = {
            'data': toplistJson,
            'listEl': document.querySelector(listEl),
            'userinfoEl': document.querySelector(userinfoEl)
        }
        this.init = function(){
            this.update();
        }
    }

    Toplist.prototype.update = function(){
        var me = this;
        var userinfo = me.setting.data.userinfo;
        var list = me.setting.data.list;

        var listArray = [], userinfoHTML = '';
        for(let i = 0; i < list.length; i++){
            listArray.push(`<li><span>${list[i].name}</span><span>${list[i].socurs}</span></li>`);
        }

        userinfoHTML = `
            <div class="socurs">${userinfo.socurs}</div>
            <div class="ranking">${userinfo.ranking}名</div>
        `;

        me.setting.listEl.innerHTML = listArray.join('');
        me.setting.userinfoEl.innerHTML = userinfoHTML;
    }

    var toplist = new Toplist('.toplist-table ul', '.toplist-userinfo');
    toplist.init();




</script>
</body>
</html>